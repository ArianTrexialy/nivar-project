<Window x:Class="DeviceAnalisys_v5.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:scott="clr-namespace:ScottPlot.WPF;assembly=ScottPlot.WPF"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="Real-Time Device Analysis Pro"
        Height="800" Width="1500"
        Background="#1E1E1E" Foreground="White"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <!-- Watermark Style for TextBox -->
        <Style x:Key="WatermarkTextBoxStyle" TargetType="TextBox">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="#3A3A3A"/>
            <Setter Property="BorderBrush" Value="#555555"/>
            <Setter Property="CaretBrush" Value="White"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Height" Value="28"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Grid>
                            <TextBox Text="{Binding Path=Text, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                     x:Name="textSource"
                                     Background="Transparent"
                                     Panel.ZIndex="2"
                                     Foreground="White"/>
                            <TextBlock x:Name="watermark"
                                       Text="{Binding Tag, RelativeSource={RelativeSource TemplatedParent}, FallbackValue='Enter Serial Number'}"
                                       Foreground="#88AAAAAA"
                                       FontStyle="Italic"
                                       Padding="8,4"
                                       Panel.ZIndex="1"
                                       Visibility="Collapsed"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="Text" Value="">
                                <Setter TargetName="watermark" Property="Visibility" Value="Visible"/>
                            </Trigger>
                            <Trigger Property="Text" Value="{x:Null}">
                                <Setter TargetName="watermark" Property="Visibility" Value="Visible"/>
                            </Trigger>
                            <Trigger Property="IsKeyboardFocused" Value="True">
                                <Setter TargetName="watermark" Property="Visibility" Value="Collapsed"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header Toolbar -->
        <Border Grid.Row="0" Background="#252526" BorderBrush="#007ACC" BorderThickness="0,0,0,2">
            <StackPanel Orientation="Horizontal" Margin="15,10">
                <Button Content="Plot From Excel" Margin="0,0,20,0" Padding="12,8" Click="PlotFromExcel_Click"
                        Background="#3A3A3A" Foreground="White" BorderBrush="#007ACC"/>
                <Button Content="Pause / Resume" Margin="0,0,20,0" Padding="12,8" Click="PauseResume_Click"
                        Background="#3A3A3A" Foreground="White" BorderBrush="#007ACC"/>

                <Button Margin="0,0,20,0" Padding="12,8" Click="ClearAll_Click"  Background="#3A3A3A" Foreground="White" BorderBrush="#007ACC">
                    <!-- Use MaterialDesign style + ripple + corner radius -->
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="materialDesign:RippleAssist.Feedback" Value="#FF5722"/>
                            <Setter Property="materialDesign:ButtonAssist.CornerRadius" Value="8"/>
                        </Style>
                    </Button.Style>

                    <!-- This is the ONLY content now (StackPanel with icon + text) -->
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="DeleteForever" 
                                 Width="20" Height="20" 
                                 VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBlock Text="Clear All" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <ComboBox x:Name="cmbFps" Width="120" Margin="0,0,20,0" Padding="10,8" SelectionChanged="cmbFps_SelectionChanged"
                          Background="#3A3A3A" Foreground="Black" BorderBrush="#007ACC">
                    <ComboBoxItem Content="10 ms" Tag="10"/>
                    <ComboBoxItem Content="20 ms" Tag="20"/>
                    <ComboBoxItem Content="50 ms" Tag="50"/>
                    <ComboBoxItem Content="100 ms" Tag="100" IsSelected="True"/>
                    <ComboBoxItem Content="500 ms" Tag="500"/>
                    <ComboBoxItem Content="1000 ms" Tag="1000"/>
                    <ComboBoxItem Content="2000 ms" Tag="2000"/>
                    <ComboBoxItem Content="5000 ms" Tag="5000"/>
                </ComboBox>
            </StackPanel>
        </Border>

        <Grid x:Name="mainContentGrid" Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="leftColumn" Width="380"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Panel - Serial Control -->
            <Border Grid.Column="0" Background="#252526" BorderBrush="#007ACC" BorderThickness="0,0,2,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Width="300" Margin="10,20,10,20" VerticalAlignment="Top">
                        <TextBlock Text="Serial Connection"
                                   FontSize="18" FontWeight="Bold" Foreground="#007ACC"
                                   Margin="0,0,0,25" HorizontalAlignment="Center"/>

                        <!-- Port Settings -->
                        <GroupBox Margin="0,0,0,20">
                            <GroupBox.Header>
                                <Border Background="#007ACC" Padding="10,6" CornerRadius="6">
                                    <TextBlock Text="Port Settings" Foreground="White" FontWeight="SemiBold"/>
                                </Border>
                            </GroupBox.Header>
                            <StackPanel Margin="12">
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                    <TextBlock Text="COM Port:" VerticalAlignment="Center" Foreground="LightGray" Width="75"/>
                                    <ComboBox x:Name="cmbComPorts" Width="130" Height="30" Margin="5,0,0,0">
                                        <ComboBox.ItemContainerStyle>
                                            <Style TargetType="ComboBoxItem">
                                                <Setter Property="Foreground" Value="Black"/>
                                                <Setter Property="Background" Value="White"/>
                                            </Style>
                                        </ComboBox.ItemContainerStyle>
                                    </ComboBox>
                                    <Button Content="↻" FontSize="18" Width="30" Height="30"
                                            Background="Transparent" Foreground="White" BorderThickness="0"
                                            Margin="8,0,0,0" Click="RefreshPorts_Click" ToolTip="Refresh Ports"/>
                                </StackPanel>
                                <Button x:Name="btnConnect" Content="Connect" Margin="0,8,0,6" Padding="10,8"
                                        Background="#4CAF50" Foreground="White" FontWeight="Bold" Click="Connect_Click"/>
                                <Button x:Name="btnDisconnect" Content="Disconnect" Margin="0,0,0,10" Padding="10,8"
                                        Background="#F44336" Foreground="White" FontWeight="Bold" Click="Disconnect_Click" IsEnabled="False"/>
                                <TextBlock x:Name="txtConnectionStatus" Text="Status: Disconnected" Foreground="OrangeRed"
                                           FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Device Serial Numbers -->
                        <GroupBox Margin="0,0,0,20">
                            <GroupBox.Header>
                                <Border Background="#007ACC" Padding="10,6" CornerRadius="6">
                                    <TextBlock Text="Device Serial Numbers" Foreground="White" FontWeight="SemiBold"/>
                                </Border>
                            </GroupBox.Header>
                            <StackPanel Margin="12">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="32"/>
                                        <RowDefinition Height="32"/>
                                        <RowDefinition Height="32"/>
                                        <RowDefinition Height="32"/>
                                    </Grid.RowDefinitions>
                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Device 1:" VerticalAlignment="Center" Foreground="LightGray" FontSize ="14" FontWeight="Medium"/>
                                    <TextBox x:Name="txtSerial1" Grid.Row="0" Grid.Column="1" Style="{StaticResource WatermarkTextBoxStyle}" Text="" TextChanged="SerialTextBox_TextChanged">
                                        <TextBox.Tag>SN-DEV001 (default)</TextBox.Tag>
                                    </TextBox>
                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Device 2:" VerticalAlignment="Center" Foreground="LightGray" FontSize ="14" FontWeight="Medium"/>
                                    <TextBox x:Name="txtSerial2" Grid.Row="1" Grid.Column="1" Style="{StaticResource WatermarkTextBoxStyle}" Text="" TextChanged="SerialTextBox_TextChanged">
                                        <TextBox.Tag>SN-DEV002 (default)</TextBox.Tag>
                                    </TextBox>
                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Device 3:" VerticalAlignment="Center" Foreground="LightGray" FontSize ="14" FontWeight="Medium"/>
                                    <TextBox x:Name="txtSerial3" Grid.Row="2" Grid.Column="1" Style="{StaticResource WatermarkTextBoxStyle}" Text="" TextChanged="SerialTextBox_TextChanged">
                                        <TextBox.Tag>SN-DEV003 (default)</TextBox.Tag>
                                    </TextBox>
                                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Device 4:" VerticalAlignment="Center" Foreground="LightGray" FontSize ="14" FontWeight="Medium"/>
                                    <TextBox x:Name="txtSerial4" Grid.Row="3" Grid.Column="1" Style="{StaticResource WatermarkTextBoxStyle}" Text="" TextChanged="SerialTextBox_TextChanged">
                                        <TextBox.Tag>SN-DEV004 (default)</TextBox.Tag>
                                    </TextBox>
                                </Grid>
                                <TextBlock Text="Leave empty to use default serial number" Foreground="#88AAAAAA" FontSize="11" Margin="0,10,0,0" HorizontalAlignment="Center" FontStyle="Italic"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Test Controls -->
                        <GroupBox Margin="0,0,0,20">
                            <GroupBox.Header>
                                <Border Background="#007ACC" Padding="10,6" CornerRadius="6">
                                    <TextBlock Text="Test Controls" Foreground="White" FontWeight="SemiBold"/>
                                </Border>
                            </GroupBox.Header>
                            <StackPanel Margin="12">
                                <Button x:Name="btnTestLoad" Height="52" Margin="0,0,0,12" Padding="16,0" FontSize="14" FontWeight="SemiBold" Cursor="Hand" Click="TestLoad_Click" ToolTip="Run test under load condition" Background="#FF5722" Foreground="White" BorderThickness="0">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="Weight" Width="24" Height="24" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <TextBlock Text="Test Load" VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <Button.Style>
                                        <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="8" BorderThickness="0">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="Background" Value="#E64A19"/>
                                                            </Trigger>
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter TargetName="border" Property="Background" Value="#D84315"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>

                                <Button x:Name="btnTestNoLoad" Height="52" Padding="16,0" FontSize="14" FontWeight="SemiBold" Cursor="Hand" Click="TestNoLoad_Click" ToolTip="Run test without load" Background="#2196F3" Foreground="White" BorderThickness="0">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon Kind="WeightLifter" Width="24" Height="24" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <TextBlock Text="Test NoLoad" VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <Button.Style>
                                        <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="8" BorderThickness="0">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="Background" Value="#1E88E5"/>
                                                            </Trigger>
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter TargetName="border" Property="Background" Value="#1976D2"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>

                                <TextBlock x:Name="txtTestStatus" Text="Test Status: Idle" Foreground="#00C853" FontWeight="Medium" FontSize="14" HorizontalAlignment="Center" Margin="0,16,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Data Export -->
                        <GroupBox Margin="0,0,0,0">
                            <GroupBox.Header>
                                <Border Background="#007ACC" Padding="10,6" CornerRadius="6">
                                    <TextBlock Text="Data Export" Foreground="White" FontWeight="SemiBold"/>
                                </Border>
                            </GroupBox.Header>
                            <StackPanel Margin="12">
                                <Button x:Name="btnSaveToExcel" Height="48" Margin="0,0,0,12" Padding="16,0" Click="SaveToExcel_Click" ToolTip="Save current test data to Excel" FontSize="14" FontWeight="SemiBold" Background="#007ACC" Foreground="White" BorderThickness="0" Cursor="Hand">
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <materialDesign:PackIcon Kind="FileExcel" Width="24" Height="24" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <TextBlock Text="Save to Excel" VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <Button.Style>
                                        <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="8" BorderThickness="0">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="Background" Value="#0066AA"/>
                                                            </Trigger>
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter TargetName="border" Property="Background" Value="#005588"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <Button x:Name="btnSaveToPdf" Height="48" Padding="16,0" Click="SaveToPdf_Click" ToolTip="Export current test data to PDF" FontSize="14" FontWeight="SemiBold" Background="#4CAF50" Foreground="White" BorderThickness="0" Cursor="Hand">
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <materialDesign:PackIcon Kind="FilePdfBox" Width="24" Height="24" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <TextBlock Text="Save to PDF" VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <Button.Style>
                                        <Style TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="Button">
                                                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="8" BorderThickness="0">
                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <ControlTemplate.Triggers>
                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                <Setter TargetName="border" Property="Background" Value="#43A047"/>
                                                            </Trigger>
                                                            <Trigger Property="IsPressed" Value="True">
                                                                <Setter TargetName="border" Property="Background" Value="#388E3C"/>
                                                            </Trigger>
                                                        </ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>
                                <TextBlock Text="{Binding ElementName=livePointsText, Path=Text, StringFormat='Current Points: {0}'}" Foreground="LightGray" FontSize="13" HorizontalAlignment="Center" Margin="0,16,0,0"/>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- Right Panel - Plots + Live Info -->
            <Grid Grid.Column="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="19*"/>
                    <ColumnDefinition Width="261*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Live Info Bar -->
                <Border Grid.Row="0" Background="#2D2D30" Padding="10" Grid.ColumnSpan="2" Margin="0,0,0,666" Grid.RowSpan="2">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <TextBlock Text="Points: " Foreground="LightGray"/>
                        <TextBlock x:Name="livePointsText" Text="0" Foreground="#00FF00" FontWeight="Bold" Margin="0,0,20,0"/>
                        <TextBlock Text="Last Index: " Foreground="LightGray"/>
                        <TextBlock x:Name="liveLastUpdate" Text="-" Foreground="White" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

                <!-- Plots Grid - Main container for all plots -->
                <Grid x:Name="plotsGrid" Grid.Row="1" Grid.ColumnSpan="2">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Plot 0 -->
                    <Grid x:Name="grid0" Grid.Row="0" Grid.Column="0" Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <scott:WpfPlot x:Name="plot0" Grid.Row="0"/>
                        <Border Grid.Row="1" Background="#1E1E1E" BorderBrush="#007ACC" BorderThickness="1" Margin="0,5,0,0">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5">
                                <CheckBox Content="SetPoint" Tag="0;0" IsChecked="True" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                                <CheckBox Content="Actual" Tag="0;1" IsChecked="True" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                                <CheckBox Content="Pitch" Tag="0;2" IsChecked="False" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                                <CheckBox Content="Roll" Tag="0;3" IsChecked="False" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                            </StackPanel>
                        </Border>
                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5">
                            <TextBlock x:Name="valSetPoint0" Text="SetPoint: -" Foreground="#66BBFF" Margin="10,0"/>
                            <TextBlock x:Name="valActual0" Text="Actual: -" Foreground="#FFAA66" Margin="10,0"/>
                            <TextBlock x:Name="valPitch0" Text="Pitch: -" Foreground="#88FF88" Margin="10,0"/>
                            <TextBlock x:Name="valRoll0" Text="Roll: -" Foreground="#FF88FF" Margin="10,0"/>
                        </StackPanel>
                        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="10">
                            <Button x:Name="btnFullHD0" Content="FullHD" Padding="8,4" FontSize="12" Click="BtnFullHD_Click" Tag="0" Margin="0,0,6,0"/>
                            <Button x:Name="btnHD0" Content="HD" Padding="8,4" FontSize="12" Click="BtnHD_Click" Tag="0"/>
                        </StackPanel>
                    </Grid>

                    <!-- Plot 1 -->
                    <Grid x:Name="grid1" Grid.Row="0" Grid.Column="1" Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <scott:WpfPlot x:Name="plot1" Grid.Row="0"/>
                        <Border Grid.Row="1" Background="#1E1E1E" BorderBrush="#007ACC" BorderThickness="1" Margin="0,5,0,0">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5">
                                <CheckBox Content="SetPoint" Tag="1;0" IsChecked="True" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                                <CheckBox Content="Actual" Tag="1;1" IsChecked="True" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                                <CheckBox Content="Pitch" Tag="1;2" IsChecked="False" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                                <CheckBox Content="Roll" Tag="1;3" IsChecked="False" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                            </StackPanel>
                        </Border>
                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5">
                            <TextBlock x:Name="valSetPoint1" Text="SetPoint: -" Foreground="#66BBFF" Margin="10,0"/>
                            <TextBlock x:Name="valActual1" Text="Actual: -" Foreground="#FFAA66" Margin="10,0"/>
                            <TextBlock x:Name="valPitch1" Text="Pitch: -" Foreground="#88FF88" Margin="10,0"/>
                            <TextBlock x:Name="valRoll1" Text="Roll: -" Foreground="#FF88FF" Margin="10,0"/>
                        </StackPanel>
                        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="10">
                            <Button x:Name="btnFullHD1" Content="FullHD" Padding="8,4" FontSize="12" Click="BtnFullHD_Click" Tag="1" Margin="0,0,6,0"/>
                            <Button x:Name="btnHD1" Content="HD" Padding="8,4" FontSize="12" Click="BtnHD_Click" Tag="1"/>
                        </StackPanel>
                    </Grid>

                    <!-- Plot 2 -->
                    <Grid x:Name="grid2" Grid.Row="1" Grid.Column="0" Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <scott:WpfPlot x:Name="plot2" Grid.Row="0"/>
                        <Border Grid.Row="1" Background="#1E1E1E" BorderBrush="#007ACC" BorderThickness="1" Margin="0,5,0,0">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5">
                                <CheckBox Content="SetPoint" Tag="2;0" IsChecked="True" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                                <CheckBox Content="Actual" Tag="2;1" IsChecked="True" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                                <CheckBox Content="Pitch" Tag="2;2" IsChecked="False" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                                <CheckBox Content="Roll" Tag="2;3" IsChecked="False" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                            </StackPanel>
                        </Border>
                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5">
                            <TextBlock x:Name="valSetPoint2" Text="SetPoint: -" Foreground="#66BBFF" Margin="10,0"/>
                            <TextBlock x:Name="valActual2" Text="Actual: -" Foreground="#FFAA66" Margin="10,0"/>
                            <TextBlock x:Name="valPitch2" Text="Pitch: -" Foreground="#88FF88" Margin="10,0"/>
                            <TextBlock x:Name="valRoll2" Text="Roll: -" Foreground="#FF88FF" Margin="10,0"/>
                        </StackPanel>
                        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="10">
                            <Button x:Name="btnFullHD2" Content="FullHD" Padding="8,4" FontSize="12" Click="BtnFullHD_Click" Tag="2" Margin="0,0,6,0"/>
                            <Button x:Name="btnHD2" Content="HD" Padding="8,4" FontSize="12" Click="BtnHD_Click" Tag="2"/>
                        </StackPanel>
                    </Grid>

                    <!-- Plot 3 -->
                    <Grid x:Name="grid3" Grid.Row="1" Grid.Column="1" Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <scott:WpfPlot x:Name="plot3" Grid.Row="0"/>
                        <Border Grid.Row="1" Background="#1E1E1E" BorderBrush="#007ACC" BorderThickness="1" Margin="0,5,0,0">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5">
                                <CheckBox Content="SetPoint" Tag="3;0" IsChecked="True" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                                <CheckBox Content="Actual" Tag="3;1" IsChecked="True" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                                <CheckBox Content="Pitch" Tag="3;2" IsChecked="False" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                                <CheckBox Content="Roll" Tag="3;3" IsChecked="False" Foreground="White" Margin="10,5"
                                          Checked="PlotCheckbox_Changed" Unchecked="PlotCheckbox_Changed"/>
                            </StackPanel>
                        </Border>
                        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,5">
                            <TextBlock x:Name="valSetPoint3" Text="SetPoint: -" Foreground="#66BBFF" Margin="10,0"/>
                            <TextBlock x:Name="valActual3" Text="Actual: -" Foreground="#FFAA66" Margin="10,0"/>
                            <TextBlock x:Name="valPitch3" Text="Pitch: -" Foreground="#88FF88" Margin="10,0"/>
                            <TextBlock x:Name="valRoll3" Text="Roll: -" Foreground="#FF88FF" Margin="10,0"/>
                        </StackPanel>
                        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="10">
                            <Button x:Name="btnFullHD3" Content="FullHD" Padding="8,4" FontSize="12" Click="BtnFullHD_Click" Tag="3" Margin="0,0,6,0"/>
                            <Button x:Name="btnHD3" Content="HD" Padding="8,4" FontSize="12" Click="BtnHD_Click" Tag="3"/>
                        </StackPanel>
                    </Grid>
                </Grid>
            </Grid>
        </Grid>

        <!-- Status Bar -->
        <StatusBar Grid.Row="2" Background="#252526">
            <StatusBarItem>
                <TextBlock x:Name="statusText" Text="Ready | Points: 0" Foreground="LightGray"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>